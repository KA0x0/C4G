#+TITLE: Guix Minimal-Packages
#+PROPERTY: header-args:scheme :tangle my-variables.scm

#+begin_src
(use-modules (gnu packages) (gcrypt hash) 
(use-modules (gnu packages emacs))
(define-module (my-variables))

(define my-motd
     (service login-service-type
               (login-configuration
                (motd (plain-file "motd" "\
UNAUTHORIZED ACCESS TO THIS DEVICE IS PROHIBITED.\n
You must have explicit, authorized permission to access or configure this device.\n
Unauthorized attempts and actions to access or use this system may result in civil and/or criminal penalties.\n
All activities performed on this device are logged and monitored.\n\n")))))

(define-public emacs-with-native-comp-no-x
  (package/inherit emacs-with-native-comp
    (name "emacs-with-native-comp-no-x")
    (synopsis "The extensible, customizable, self-documenting text
editor (console only)")
    (build-system gnu-build-system)
    (inputs (fold alist-delete
                  (package-inputs emacs)
                  '("libx11" "gtk+" "libxft" "libtiff" "giflib" "libjpeg"
                    "imagemagick" "libpng" "librsvg" "libxpm" "libice"
                    "libsm" "cairo" "pango" "harfbuzz"

                    ;; These depend on libx11, so remove them as well.
                    "libotf" "m17n-lib" "dbus")))
    (arguments
     (substitute-keyword-arguments (package-arguments emacs)
       ((#:configure-flags flags ''())
        `(delete "--with-cairo" ,flags))
       ((#:phases phases)
        `(modify-phases ,phases
           (delete 'restore-emacs-pdmp)
           (delete 'strip-double-wrap)))))))

(define-public my-packages
  (map specification->package
  '("bash"
   "bash-completion"
   "emacs-bash-completion"
   "bzip2"
   "coreutils"
   "curl"
   "diffutils"
   "my-emacs-no-x"
   "emacs-consult"
   "emacs-embark"
   "emacs-evil"
   "emacs-evil-collection"
   "emacs-geiser"
   "emacs-geiser-guile"
   "emacs-guix"
   "emacs-magit"
   "emacs-orderless"
   "emacs-org"
   "emacs-paredit" 
   "emacs-tramp"
   "emacs-undo-tree"
   "emacs-which-key"
   "eudev"
   "findutils"
   "gawk"
   "git"
   "grep"
   "guile"
   "guile-colorized"
   "guile-readline"
   "gzip"
   "kmod"
   "less"
   "lzip"
   "man-db"
   "nss-certs"
   "patch"
   "procps"
   "psmisc"
   "sed"
   "shadow"
   "sudo"
   "tar"
   "util-linux-with-udev"
   "wget"
   "which"
   "xz")))
#+end_src